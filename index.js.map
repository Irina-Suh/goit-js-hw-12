{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\n\n     const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n \nexport function ShowGallery(images, append = false){     //, append = false\n //gallery.innerHTML = '';\n    const markup = images.map(image => `\n    <li class=\"gallery-item\">\n    <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n      \n        <img class=\"li-img\"\n        src=\"${image.webformatURL}\"\n             alt=\"${image.tags}\" />\n        <div class=\"info\">\n          <p> Likes: <br>${image.likes}</br></p>\n          <p> Views: <br>${image.views}</br></p>\n          <p>Comments: <br>${image.comments}</br></p>\n          <p>Downloads: <br>${image.downloads}</br></p>\n        </div>\n    </a>\n     </li>\n  `).join('');\n if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup); \n  } else {\n    gallery.innerHTML = markup; \n  }\n // gallery.insertAdjacentHTML('beforeend', markup);\n // gallery.innerHTML = markup;\n  lightbox.refresh();\n\n}\n\n\n","// //key (required) \tstr \tYour API key: 48860281-d74be350dbe4d701146d01f08\n\n\nimport axios from 'axios';\n\nconst API_KEY = '48860281-d74be350dbe4d701146d01f08'; \n// const baseUrl = \"https://pixabay.com\";\n// const endPoint = \"/api\";\n\nexport async function searchImg(searchName, page, perPage) {\n   \n \n    const params = new URLSearchParams({\n \n\n      key: API_KEY,\n      q: searchName,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page : page,\n      per_page: perPage,\n\n    });\n    const url = `https://pixabay.com/api/?${params}`;\n \n    return await axios.get(url)\n  // catch(error) {\n  //   console.error('Error:', error);\n// }\n}\n\n\n\n\n\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { ShowGallery , gallery } from \"./js/render-functions\"; \nimport { searchImg } from \"./js/pixabay-api\";\n\n const form = document.querySelector('.js-img-form');\nconst input = document.querySelector('.searchInput');\nconst waitMsg = document.querySelector('.wait-msg');\n const btnLoadMore = document.querySelector('.js-btn-load');\nconst loadMsg = document.querySelector('.load-msg');\n\nconst params = {\n  searchName :'',\n  page: 1,\n  perPage: 40,\n}\nlet total = 0;\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\ngallery.innerHTML = '';\n\n // let searchName = input.value.trim();\n  params.searchName = input.value.trim();\n  params.page = 1;\n  if (!params.searchName) {\n     \n      //  gallery.innerHTML = '';\n    iziToast.error ({\n      position: \"topRight\",\n      title: 'Error',\n      message: 'Input search string'\n    });\n   \n  return\n  }\n\n  waitMsg.innerHTML = '\"Wait, the image is loaded\" <span class=\"loader\"></span>'\n  \n try {\n  const response = await searchImg (params.searchName, params.page, params.perPage) \n   total = response.data.totalHits;\n   console.log(`total ${total}`)\n    if (response.data.hits.length === 0) {\n      \n      gallery.innerHTML = '';\n      iziToast.error({\n        close: `true`,\n        position: \"topRight\",\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!'\n      });\n      form.reset();\n       \n    } else {\n      //   gallery.innerHTML = '';   \n      ShowGallery(response.data.hits); \n      \n    // showLoadMoreBtn()\n    }\n   waitMsg.textContent = \"\";\n   checkBtnStatus(); \n  }\n\n    catch  (error ) {\n      \n       form.reset();\n        hideLoadMoreBtn();\n      waitMsg.textContent = 'Ups ...';\n      iziToast.error ({\n        close: `true`,\n          position: \"topRight\",\n          title: 'Error',\n          message: 'Network error. Check internet connection.'\n      })\n  \n    }\n    \n \n//checkBtnStatus ();\n   form.reset();   \n     \n\n});\n\n\nbtnLoadMore.addEventListener('click', async (e) => {\n\n \n  params.page += 1;\n // console.log(\"Поточна сторінка:\", params.page);\n \n\n  checkBtnStatus();\n  hideLoadMoreBtn();\n  loadMsg.innerHTML = '\"Wait, loading more images\" <span class=\"loader\"></span>'; \n    const response = await searchImg(params.searchName, params.page, params.perPage)\n  \n    ShowGallery(response.data.hits, true)\n    scroll();   \n   //checkBtnStatus();\n      loadMsg.textContent = \"\";\n\n})\n\n\nfunction checkBtnStatus () {\nconst maxPage = Math.ceil(total / params.perPage);\n\n  if (params.page >= maxPage) { //total === 0 ||\n  \n  hideLoadMoreBtn ()\n  \n  iziToast.show ({\n    backgroundColor: 'rgba(64, 64, 240, 0.5)',\n     messageColor: `rgba(255, 255, 255, 1)`,\n    close: `true`,\n    position: \"topRight\",\n    \n    titleColor: '#fff',\n    titleSize: '16px',\n    message: 'We are sorry, but you have reached the end of search results.'\n});\n\n\n} else {\n  showLoadMoreBtn ();\n}\n}\n\n\nfunction showLoadMoreBtn() {\n btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  btnLoadMore.classList.add('hidden');\n}\n\nfunction scroll() {\n  if (gallery.firstElementChild) {\n    const info = gallery.firstElementChild.getBoundingClientRect();\n    const height = info.height;\n    scrollBy({\n      behavior: 'smooth',\n      top: height * 2,\n    })\n  }\n}"],"names":["gallery","lightbox","SimpleLightbox","ShowGallery","images","append","markup","image","API_KEY","searchImg","searchName","page","perPage","url","axios","form","input","waitMsg","btnLoadMore","loadMsg","params","total","e","iziToast","response","checkBtnStatus","hideLoadMoreBtn","scroll","maxPage","showLoadMoreBtn","height"],"mappings":"owBAIO,MAAMA,EAAU,SAAS,cAAc,UAAU,EAE7CC,EAAW,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GACtB,CAAK,EAGE,SAASC,EAAYC,EAAQC,EAAS,GAAM,CAE/C,MAAMC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,eAExBA,EAAM,aAAa;AAAA;AAAA;AAAA,eAGnBA,EAAM,YAAY;AAAA,oBACbA,EAAM,IAAI;AAAA;AAAA,2BAEHA,EAAM,KAAK;AAAA,2BACXA,EAAM,KAAK;AAAA,6BACTA,EAAM,QAAQ;AAAA,8BACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAI1C,EAAE,KAAK,EAAE,EACPF,EACDL,EAAQ,mBAAmB,YAAaM,CAAM,EAE9CN,EAAQ,UAAYM,EAItBL,EAAS,QAAO,CAElB,CClCA,MAAMO,EAAU,qCAIT,eAAeC,EAAUC,EAAYC,EAAMC,EAAS,CAevD,MAAMC,EAAM,4BAZG,IAAI,gBAAgB,CAGjC,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAOC,EACP,SAAUC,CAEhB,CAAK,CAC6C,GAE9C,OAAO,MAAME,EAAM,IAAID,CAAG,CAI9B,CCxBC,MAAME,EAAO,SAAS,cAAc,cAAc,EAC7CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,WAAW,EAC3CC,EAAc,SAAS,cAAc,cAAc,EACpDC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAS,CACb,WAAY,GACZ,KAAM,EACN,QAAS,EACX,EACA,IAAIC,EAAQ,EACZN,EAAK,iBAAiB,SAAU,MAAOO,GAAM,CAO3C,GANAA,EAAE,eAAc,EAClBtB,EAAQ,UAAY,GAGlBoB,EAAO,WAAaJ,EAAM,MAAM,KAAI,EACpCI,EAAO,KAAO,EACV,CAACA,EAAO,WAAY,CAGtBG,EAAS,MAAO,CACd,SAAU,WACV,MAAO,QACP,QAAS,qBACf,CAAK,EAEH,MACC,CAEDN,EAAQ,UAAY,2DAErB,GAAI,CACH,MAAMO,EAAW,MAAMf,EAAWW,EAAO,WAAYA,EAAO,KAAMA,EAAO,OAAO,EAC/EC,EAAQG,EAAS,KAAK,UACtB,QAAQ,IAAI,SAASH,CAAK,EAAE,EACvBG,EAAS,KAAK,KAAK,SAAW,GAEhCxB,EAAQ,UAAY,GACpBuB,EAAS,MAAM,CACb,MAAO,OACP,SAAU,WACV,MAAO,QACP,QAAS,0EACjB,CAAO,EACDR,EAAK,MAAK,GAIVZ,EAAYqB,EAAS,KAAK,IAAI,EAIjCP,EAAQ,YAAc,GACtBQ,GACA,MAEiB,CAEbV,EAAK,MAAK,EACTW,IACFT,EAAQ,YAAc,UACtBM,EAAS,MAAO,CACd,MAAO,OACL,SAAU,WACV,MAAO,QACP,QAAS,2CACnB,CAAO,CAEF,CAIFR,EAAK,MAAK,CAGb,CAAC,EAGDG,EAAY,iBAAiB,QAAS,MAAOI,GAAM,CAGjDF,EAAO,MAAQ,EAIfK,IACAC,IACAP,EAAQ,UAAY,2DAClB,MAAMK,EAAW,MAAMf,EAAUW,EAAO,WAAYA,EAAO,KAAMA,EAAO,OAAO,EAE/EjB,EAAYqB,EAAS,KAAK,KAAM,EAAI,EACpCG,IAEER,EAAQ,YAAc,EAE5B,CAAC,EAGD,SAASM,GAAkB,CAC3B,MAAMG,EAAU,KAAK,KAAKP,EAAQD,EAAO,OAAO,EAE1CA,EAAO,MAAQQ,GAEnBF,EAAkB,EAElBH,EAAS,KAAM,CACb,gBAAiB,yBAChB,aAAc,yBACf,MAAO,OACP,SAAU,WAEV,WAAY,OACZ,UAAW,OACX,QAAS,+DACb,CAAC,GAICM,GAEF,CAGA,SAASA,GAAkB,CAC1BX,EAAY,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASQ,GAAkB,CACzBR,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASS,GAAS,CAChB,GAAI3B,EAAQ,kBAAmB,CAE7B,MAAM8B,EADO9B,EAAQ,kBAAkB,sBAAqB,EACxC,OACpB,SAAS,CACP,SAAU,SACV,IAAK8B,EAAS,CACpB,CAAK,CACF,CACH"}